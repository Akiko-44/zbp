(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-105e02c8"],{"0765":function(t,e,a){"use strict";var l=a("d132"),n=a.n(l);n.a},2934:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}));var l=a("b775");function n(){return Object(l["a"])({url:"/admin/platform/getAllPlatform",method:"get"})}function i(){return Object(l["a"])({url:"/admin/eth/getBlockChains",method:"get"})}},6100:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-form",{ref:"listQueryForm",attrs:{model:t.listParams,inline:!0}},[a("el-form-item",{attrs:{label:"调度名称:"}},[a("el-input",{staticStyle:{width:"195px"},attrs:{placeholder:"请输入调度名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listParams.name,callback:function(e){t.$set(t.listParams,"name",e)},expression:"listParams.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"调度类型:"}},[a("el-select",{attrs:{placeholder:"请选择调度类型"},model:{value:t.listParams.scheduleType,callback:function(e){t.$set(t.listParams,"scheduleType",e)},expression:"listParams.scheduleType"}},t._l(t.scheduleList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"上链平台:"}},[a("el-select",{attrs:{placeholder:"请选择上链平台"},model:{value:t.listParams.platformId,callback:function(e){t.$set(t.listParams,"platformId",e)},expression:"listParams.platformId"}},t._l(t.platformList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.displayName,value:t.id}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"执行状态:"}},[a("el-select",{attrs:{placeholder:"请选择执行状态"},model:{value:t.listParams.status,callback:function(e){t.$set(t.listParams,"status",e)},expression:"listParams.status"}},t._l(t.statusList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"执行结果:"}},[a("el-select",{attrs:{placeholder:"请选择执行结果"},model:{value:t.listParams.result,callback:function(e){t.$set(t.listParams,"result",e)},expression:"listParams.result"}},t._l(t.resultList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("\n        查找\n      ")]),t._v(" "),a("el-button",{staticClass:"fr",attrs:{type:"warning"},on:{click:function(e){return t.$router.push({name:"modifyDispatch"})}}},[t._v("添加")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"调度名称"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("span",[t._v(t._s(l.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"调度类型"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("span",[t._v(t._s(t.scheduleMap[l.scheduleType]))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"上链平台"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("span",[t._v(t._s(l.displayName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"执行操作"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("span",[t._v(t._s(t.actionMap[l.action]||"-"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"执行状态"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("span",[t._v(t._s(t.statusMap[l.status]))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"执行结果"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("span",[t._v(t._s(t.resultMap[l.result]))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("span",[t._v(t._s(l.createTime))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"更新时间"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("span",[t._v(t._s(l.updateTime))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"260",fixed:"right",align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row,n=e.$index;return[a("el-button",{attrs:{size:"small"},on:{click:function(e){return t.$router.push({name:"modifyDispatch",query:{id:l.id}})}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(e){return t.delDispatch(l.id,n)}}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(e){return t.showDetailDialog(l.log)}}},[t._v("执行详情")])]}}])})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.listLoading,expression:"!listLoading"}],staticClass:"pagination-container"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,30,50],total:t.total,"page-size":t.listParams.size,"current-page":t.listParams.current},on:{"update:currentPage":function(e){return t.$set(t.listParams,"current",e)},"update:current-page":function(e){return t.$set(t.listParams,"current",e)},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"执行详情",visible:t.dialogVisible,width:"40%","custom-class":"detail-dialog"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"detail-dialog-body"},t._l(t.detailList,(function(e,l){return a("p",{key:l},[t._v(t._s(e))])})),0),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)])],1)},n=[],i=(a("28a5"),a("f527")),s=a("2934"),r={data:function(){return{list:null,total:null,listLoading:!1,listParams:{current:1,size:20,name:"",scheduleType:void 0,platformId:void 0,status:void 0,result:void 0},platformList:[],dialogVisible:!1,detailList:[],scheduleList:[{label:"全部",value:void 0},{label:"表达式调度",value:1},{label:"定时器调度",value:2}],statusList:[{label:"全部",value:void 0},{label:"未执行",value:0},{label:"正在执行中",value:1},{label:"执行完成",value:2}],resultList:[{label:"全部",value:void 0},{label:"无结果",value:0},{label:"成功",value:1},{label:"失败",value:2}],scheduleMap:{1:"表达式调度",2:"定时器调度"},actionMap:{0:"DB数据抽取",1:"上链",2:"DB篡改校验",3:"DB补数",4:"SFTP数据抽取",5:"SFTP补数申请",6:"SFTP补数",7:"SFTP篡改验证申请",8:"SFTP篡改验证"},statusMap:{0:"未执行",1:"正在执行中",2:"执行完成"},resultMap:{0:"无结果",1:"成功",2:"失败"}}},created:function(){this.getList(),this.getAllPlatformList()},methods:{getAllPlatformList:function(){var t=this;Object(s["a"])().then((function(e){t.platformList=e.data,t.platformList.unshift({id:void 0,displayName:"全部"})}))},getList:function(){var t=this;this.listLoading=!0,Object(i["c"])(this.listParams).then((function(e){t.list=e.data.records,t.listLoading=!1,t.total=e.data.total}))},delDispatch:function(t,e){var a=this;this.$confirm("是否确认删除该调度？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){Object(i["a"])(t).then((function(t){a.list.splice(e,1)})).catch((function(){}))}))},showDetailDialog:function(t){t?(this.detailList=t.split("|"),this.dialogVisible=!0):this.$alert("该调度暂无执行详情","提示",{confirmButtonText:"确定",callback:function(t){}})},handleFilter:function(){var t=this;this.$refs.listQueryForm.validate((function(e){if(!e)return!1;t.getList()}))},handleSizeChange:function(t){this.listParams.size=t,this.getList()},handleCurrentChange:function(t){this.listParams.current=t,this.getList()}}},o=r,u=(a("0765"),a("2877")),c=Object(u["a"])(o,l,n,!1,null,"6d15f246",null);e["default"]=c.exports},d132:function(t,e,a){},f527:function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"b",(function(){return i})),a.d(e,"d",(function(){return s})),a.d(e,"a",(function(){return r}));var l=a("b775");function n(t){return Object(l["a"])({url:"/admin/dispatchingManagement/getAllThreadTask",method:"get",params:t})}function i(t){return Object(l["a"])({url:"/admin/dispatchingManagement/getThreadTask",method:"get",params:t})}function s(t){return Object(l["a"])({url:"/admin/dispatchingManagement/saveOrUpdate",method:"post",data:t})}function r(t){return Object(l["a"])({url:"/admin/dispatchingManagement/deleteThreadTask/".concat(t),method:"post"})}}}]);