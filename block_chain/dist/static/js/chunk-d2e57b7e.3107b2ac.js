(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d2e57b7e","chunk-55890e64"],{1882:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-form",{ref:"accountForm",staticClass:"listForm",staticStyle:{width:"100%"},attrs:{model:e.accountForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"手机号码:",prop:"phone"}},[a("el-input",{attrs:{disabled:!!e.id,maxlength:11,placeholder:"请输入手机号码"},model:{value:e.accountForm.phone,callback:function(t){e.$set(e.accountForm,"phone",t)},expression:"accountForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户账号:",prop:"userName"}},[a("el-input",{attrs:{disabled:!!e.id,maxlength:20,placeholder:"请输入用户账号，20字以内"},model:{value:e.accountForm.userName,callback:function(t){e.$set(e.accountForm,"userName",t)},expression:"accountForm.userName"}})],1),e._v(" "),e.id?e._e():a("el-form-item",{attrs:{label:"设置密码:",prop:"password"}},[a("el-input",{attrs:{maxlength:16,placeholder:"请输入6-16位数字或字母",type:"password",autocomplete:"off"},model:{value:e.accountForm.password,callback:function(t){e.$set(e.accountForm,"password",t)},expression:"accountForm.password"}})],1),e._v(" "),e.id?e._e():a("el-form-item",{attrs:{label:"确认密码:",prop:"queryPassword"}},[a("el-input",{attrs:{maxlength:16,placeholder:"请再次输入密码",type:"password",autocomplete:"off"},model:{value:e.accountForm.queryPassword,callback:function(t){e.$set(e.accountForm,"queryPassword",t)},expression:"accountForm.queryPassword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"助记词:",prop:"mnemonics"}},[a("el-input",{attrs:{disabled:"",type:"textarea",rows:5,placeholder:"请输入助记词，单词之间用空格隔开"},model:{value:e.accountForm.mnemonics,callback:function(t){e.$set(e.accountForm,"mnemonics",t)},expression:"accountForm.mnemonics"}})],1),e._v(" "),e.id?a("el-form-item",{attrs:{label:"公钥:",prop:"mnemonics"}},[a("el-input",{attrs:{disabled:""},model:{value:e.accountForm.publicKey,callback:function(t){e.$set(e.accountForm,"publicKey",t)},expression:"accountForm.publicKey"}})],1):e._e(),e._v(" "),e.id?a("el-form-item",{attrs:{label:"私钥:",prop:"mnemonics"}},[a("el-input",{attrs:{disabled:""},model:{value:e.accountForm.privateKey,callback:function(t){e.$set(e.accountForm,"privateKey",t)},expression:"accountForm.privateKey"}})],1):e._e(),e._v(" "),e.id?a("el-form-item",{attrs:{label:"钱包地址:",prop:"mnemonics"}},[a("el-input",{staticClass:"input-link",attrs:{readonly:""},nativeOn:{click:function(t){return e.$router.push({name:"walletAddress",query:{address:e.accountForm.walletAddress}})}},model:{value:e.accountForm.walletAddress,callback:function(t){e.$set(e.accountForm,"walletAddress",t)},expression:"accountForm.walletAddress"}})],1):e._e(),e._v(" "),e.id?a("el-form-item",{attrs:{label:"钱包余额:",prop:"mnemonics"}},[a("el-input",{staticStyle:{width:"calc(100% - 200px)"},attrs:{disabled:""},model:{value:e.walletAccount,callback:function(t){e.walletAccount=t},expression:"walletAccount"}}),e._v(" "),a("el-select",{staticStyle:{width:"196px"},on:{change:e.changeUnit},model:{value:e.unit,callback:function(t){e.unit=t},expression:"unit"}},e._l(e.unitList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),e.id?a("el-form-item",{attrs:{label:"keystore:",prop:"mnemonics"}},[a("el-input",{attrs:{disabled:""},model:{value:e.accountForm.keystorePath,callback:function(t){e.$set(e.accountForm,"keystorePath",t)},expression:"accountForm.keystorePath"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"角色类型:",prop:"type"}},[a("el-radio-group",{attrs:{disabled:!!e.id},model:{value:e.accountForm.type,callback:function(t){e.$set(e.accountForm,"type",t)},expression:"accountForm.type"}},[a("el-radio",{attrs:{label:0}},[e._v("admin")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("普通用户")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"绑定Group:"}},[e.id?a("el-input",{attrs:{disabled:"",type:"textarea",rows:5},model:{value:e.groupNameStr,callback:function(t){e.groupNameStr=t},expression:"groupNameStr"}}):e._e(),e._v(" "),e.groupName.length&&!e.id?e._l(e.groupName,(function(t,o){return a("span",{key:o},[e._v(e._s(t.join("--\x3e"))+"\n            "),o<e.groupName.length-1?a("span",[e._v("、")]):e._e()])})):e._e(),e._v(" "),e.accountForm.groupId&&e.accountForm.groupId.length||e.id?e._e():a("el-button",{on:{click:e.openGroup}},[e._v("\n          绑定\n        ")]),e._v(" "),e.accountForm.groupId&&e.accountForm.groupId.length&&!e.id?a("el-button",{on:{click:e.openGroup}},[e._v("\n          重新绑定\n        ")]):e._e()],2),e._v(" "),a("div",{staticClass:"text-center"},[a("el-button",{staticClass:"btn cancel-btn",on:{click:e.cancel}},[e._v(e._s(e.id?"返回":"取消"))]),e._v(" "),e.id?e._e():a("el-button",{staticClass:"btn save-btn",attrs:{type:"primary",loading:e.loading},on:{click:e.save}},[e._v("保存")])],1)],1)],1),e._v(" "),a("group-dialog",{ref:"groupDialog",on:{saveGroup:e.saveGroup}})],1)},r=[],n=a("5723"),i=a("61f7"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"绑定Group",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("div",[a("el-tree",{ref:"groupTree",staticClass:"filter-tree",attrs:{"node-key":"id",data:e.treeData,"check-strictly":"","show-checkbox":"","highlight-current":"",props:e.defaultProps,"filter-node-method":e.filterNode,"default-expand-all":""}})],1),e._v(" "),a("div",{staticClass:"dialog-footer text-center",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveGroup}},[e._v("保存")])],1)])},s=[],l=a("23ba"),u=a("6724"),d={name:"GroupTree",directives:{waves:u["a"]},data:function(){return{dialogTableVisible:!1,treeData:[],defaultProps:{children:"children",label:"groupName"},treeKey:"",groupList:[]}},methods:{getList:function(){var e=this;Object(l["c"])().then((function(t){e.treeData=t.data,e.treeData.map((function(e){"1"===e.id&&(e.disabled=!0)})),e.initAuthoritys()}))},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},initAuthoritys:function(){this.$refs.groupTree.setCheckedKeys(this.treeKey)},getTreeNode:function(e,t){e&&e.parent&&(this.groupList[t].unshift(e.data.groupName),this.getTreeNode(e.parent,t))},saveGroup:function(){for(var e=this.$refs.groupTree.getCheckedNodes(),t=[],a=0;a<e.length;a++)t.push(e[a].id),this.groupList[a]=[],this.getTreeNode(this.$refs.groupTree.getNode(e[a].id),a);this.$emit("saveGroup",t,this.groupList),this.dialogTableVisible=!1}}},p=d,m=a("2877"),f=Object(m["a"])(p,c,s,!1,null,"4b1380b6",null),h=f.exports,g={components:{groupDialog:h},data:function(){return{loading:!1,id:"",accountForm:{userName:"",phone:"",password:"",queryPassword:"",balance:"",type:void 0,groupId:["1"],mnemonics:""},walletAccount:void 0,unit:"1",unitList:[{value:"1",label:"ether"},{value:"2",label:"finney"},{value:"3",label:"gwei"},{value:"4",label:"wei"}],groupName:[["public group"]],groupNameStr:"",rules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:this.validateMobile,trigger:"blur"}],mnemonics:[{required:!0,message:"请输入助记词",trigger:"blur"}],password:[{required:!0,validator:this.validatePass,trigger:"blur"}],queryPassword:[{required:!0,validator:this.validatePass2,trigger:"blur"}],type:[{required:!0,message:"请选择角色类型",trigger:"change"}],groupId:[{type:"array",required:!0,message:"请至少选择一个group绑定",trigger:"change"}]}}},created:function(){this.id=this.$route.query.id,this.id?this.getAccountDetail():this.getMnemonics()},methods:{getMnemonics:function(){var e=this;Object(n["f"])().then((function(t){e.accountForm.mnemonics=t.data})).catch((function(){}))},getAccountDetail:function(){var e=this;Object(n["d"])({userId:this.id}).then((function(t){e.accountForm=t.data,e.walletAccount=e.accountForm.balance;var a=[];e.accountForm.group.map((function(e,t){a[t]=e.join("--\x3e")})),e.groupNameStr=a.join("、")})).catch((function(){}))},changeUnit:function(e){"1"===e?this.walletAccount=this.accountForm.balance:"2"===e?this.walletAccount=this.accountForm.balance*Math.pow(10,3):"3"===e?this.walletAccount=this.accountForm.balance*Math.pow(10,9):"4"===e&&(this.walletAccount=this.accountForm.balance*Math.pow(10,18))},add:function(){var e=this;Object(n["b"])(this.accountForm).then((function(t){e.success()})).catch((function(){e.loading=!1}))},save:function(){var e=this;this.$refs.accountForm.validate((function(t){if(!t)return e.$notify({title:"警告",message:"请务必填写必选项",type:"warning"}),!1;e.loading=!0,e.add()}))},success:function(){this.$notify({title:"成功",message:"提交成功",type:"success",duration:2e3}),this.$router.push({name:"account"}),this.loading=!1},openGroup:function(){this.$refs.groupDialog.dialogTableVisible=!0,this.$refs.groupDialog.treeKey=this.accountForm.groupId,this.$refs.groupDialog.getList()},saveGroup:function(e,t){this.accountForm.groupId=e,this.groupName=t},cancel:function(){this.$router.go(-1)},validateMobile:function(e,t,a){Object(i["d"])(t)?a():a(new Error("请输入正确的手机号"))},validatePass:function(e,t,a){var o=/^[A-Za-z0-9]{6,16}$/;""===t?a(new Error("请输入密码")):o.test(t)?(""!==this.accountForm.queryPassword&&this.$refs.accountForm.validateField("queryPassword"),a()):a(new Error("请输入6-16位数字或字母"))},validatePass2:function(e,t,a){""===t?a(new Error("请再次输入密码")):t!==this.accountForm.password?a(new Error("两次输入密码不一致!")):a()}}},b=g,v=(a("ee36"),Object(m["a"])(b,o,r,!1,null,"0a07c3e1",null));t["default"]=v.exports},"23ba":function(e,t,a){"use strict";a.d(t,"f",(function(){return r})),a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return c})),a.d(t,"g",(function(){return s})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return u}));var o=a("b775");function r(e){return Object(o["a"])({url:"/admin/group/get",method:"get",params:e})}function n(e){return Object(o["a"])({url:"/admin/group/saveOrUpdate",method:"post",data:e})}function i(e){return Object(o["a"])({url:"/admin/group/delete",method:"post",params:e})}function c(){return Object(o["a"])({url:"/admin/group/getAllGroup",method:"get"})}function s(){return Object(o["a"])({url:"/admin/group/getUserGroup",method:"get"})}function l(e){return Object(o["a"])({url:"/admin/chain/getDataHistory",method:"get",params:e})}function u(e){return Object(o["a"])({url:"/admin/chain/getDataHistoryDetail",method:"get",params:e})}},"49a0":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("detail")},r=[],n=a("1882"),i={components:{detail:n["default"]},data:function(){return{}},methods:{}},c=i,s=a("2877"),l=Object(s["a"])(c,o,r,!1,null,"f765cfb4",null);t["default"]=l.exports},5723:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return c})),a.d(t,"f",(function(){return s})),a.d(t,"e",(function(){return l}));var o=a("b775");function r(e){return Object(o["a"])({url:"/admin/user/get",method:"get",params:e})}function n(e){return Object(o["a"])({url:"/admin/user/registe",method:"post",data:e})}function i(e){return Object(o["a"])({url:"/admin/user/delete",method:"post",params:e})}function c(e){return Object(o["a"])({url:"/admin/user/getUserDetail",method:"get",params:e})}function s(){return Object(o["a"])({url:"/admin/user/getMnemonics",method:"get"})}function l(){return Object(o["a"])({url:"/admin/user/all",method:"get"})}},6724:function(e,t,a){"use strict";a("8d41");var o="@@wavesContext";function r(e,t){function a(a){var o=Object.assign({},t.value),r=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},o),n=r.ele;if(n){n.style.position="relative",n.style.overflow="hidden";var i=n.getBoundingClientRect(),c=n.querySelector(".waves-ripple");switch(c?c.className="waves-ripple":(c=document.createElement("span"),c.className="waves-ripple",c.style.height=c.style.width=Math.max(i.width,i.height)+"px",n.appendChild(c)),r.type){case"center":c.style.top=i.height/2-c.offsetHeight/2+"px",c.style.left=i.width/2-c.offsetWidth/2+"px";break;default:c.style.top=(a.pageY-i.top-c.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",c.style.left=(a.pageX-i.left-c.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return c.style.backgroundColor=r.color,c.className="waves-ripple z-active",!1}}return e[o]?e[o].removeHandle=a:e[o]={removeHandle:a},a}var n={bind:function(e,t){e.addEventListener("click",r(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[o].removeHandle,!1),e.addEventListener("click",r(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[o].removeHandle,!1),e[o]=null,delete e[o]}},i=function(e){e.directive("waves",n)};window.Vue&&(window.waves=n,Vue.use(i)),n.install=i;t["a"]=n},"8d41":function(e,t,a){},dcff:function(e,t,a){},ee36:function(e,t,a){"use strict";var o=a("dcff"),r=a.n(o);r.a}}]);