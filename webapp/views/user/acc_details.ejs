<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv='X-UA-Compatible' content='IE=Edge,chrome=1' />
  <meta name="renderer" content="webkit">
  <meta name="description" content="中宝协云平台-中国珠宝行业垂直云平台，聚集珠宝爱好者！最新珠宝新资讯，商品涵盖钻石、黄金、彩宝、翡翠玉石、珍珠琥珀等珍贵材质、独特设计、给您精致奢华精彩呈现。！">
  <meta name="keywords"
    content="中宝协云平台、中宝云、中宝平、珠宝圈、珠宝定制、珠宝鉴定、珠宝品牌、钻石戒指、玉石闲 置、珠宝直播、珠宝拍卖、珠宝行业、珠宝证书、求婚钻戒、彩宝、珠宝商城、珠宝首饰、珠宝展、珠宝设计、珠宝市场、珠宝图片、世界珠宝、钻戒定制、首饰、珠宝店、珠宝真品、黄金/K金及首饰、银饰及首饰、天然钻石及首饰、翡翠、和田玉、彩色宝石、珍珠、水晶、琥珀、黄龙玉、绿松石、玛瑙、印章石、其他玉石及首饰、贵金属（除黄金、K金、白银）首饰  、有机宝石（除珍珠、琥珀）、培育钻石及首饰">
  <title>
    <%= title %>
  </title>
  <link rel="shortcut icon" type="image/x-icon" href="http://app.gacjc.com/app/download/favicon.ico" />
  <link rel="bookmark" type="image/x-icon" href="http://app.gacjc.com/app/download/favicon.ico" />
  <link rel="stylesheet" type="text/css" href="//at.alicdn.com/t/font_718775_m854kdemp1s.css" />
  <link rel="stylesheet" type="text/css" href="../../src/css/sprite.css" />
  <link rel="stylesheet" type="text/css" href="../../dist/css/all.css" />
  <link rel="stylesheet" type="text/css" href="../../src/js/vue/index.css" />
  <script src="../../dist/js/template.js"></script>
  <script src="../../dist/js/lib.js"></script>
  <script src="../../dist/js/v.js"></script>
  <link rel="stylesheet" type="text/css"
    href="../../src/js/plugin/Zebra_Datepicker/dist/css/metallic/zebra_datepicker.min.css" />
</head>
<style>
  .userRightContent {
    background: #f3f3f3;
  }

  .acc-details {
    padding: 16px 32px 44px;
    background: #fff;
  }

  .no-comment {
    padding: 158px 0 109px;
    color: #666;
    font-size: 24px;
    background: #fff;
  }

  .collect_head {
    line-height: 54px;
    height: 54px;
    font-size: 16px;
    color: #666;
    font-weight: bold;
  }

  .collect_head .acc-total {
    font-weight: normal;
  }

  .collect_head .acc-total-money {
    font-size: 18px;
    color: #DF735A;
  }

  .page-pagination {
    padding: 40px 0 80px;
  }

  .table-head {
    height: 54px;
    line-height: 54px;
    font-size: 0;
    border: 1px solid #e5e5e5;
  }

  .table-head span {
    display: inline-block;
  }

  .table-head .head-item {
    font-size: 14px;
  }

  .table-head .id-item {
    padding-left: 30px;
    width: 100px;
  }

  .table-head .account-item {
    width: 150px;
  }

  .table-head .time-item {
    width: 140px;
  }

  .table-head .type-item {
    width: 150px;
  }

  .table-head .desc-item {
    width: 340px;
  }

  table {
    width: 100%;
    color: #666;
    font-size: 14px;
    border: 1px solid #e5e5e5;
    border-top: 0;
  }

  table tr {
    height: 156px;
  }

  table tr:nth-child(2n + 1) {
    background: #f7f7f7;
  }

  table .goodsName {
    padding-left: 30px;
  }

  table .createTime {
    color: #999;
  }

  table .acc-desc {
    padding-right: 30px;
    line-height: 30px;
  }
</style>

<body class="userAccount">

  <%- include ../headerbar.ejs %>
  <%- include userHeaderNav.ejs %>

  <div class="container">
    <div class="router" id="router">
      <el-breadcrumb separator-class="el-icon-arrow-right">
        <el-breadcrumb-item>
          <a href="/">首页</a>
        </el-breadcrumb-item>
        <el-breadcrumb-item>
          <a href="/user/acc_info">个人中心</a>
        </el-breadcrumb-item>
        <el-breadcrumb-item>账户明细</el-breadcrumb-item>
      </el-breadcrumb>
    </div>
  </div>

  <div id="main" class="main" style="background: #f4f4f4" v-cloak>
    <div class="clearfix container">
      <div class="userLeftNav">
        <%- include userLeftNav.ejs %>
      </div>
      <div class="userRightContent">

        <div class="acc-details" v-if="records && records.length">
          <div class="collect_head">
            <span>收支明细</span>
            <span class="fr acc-total">当前账户余额：
              <span class="acc-total-money">¥{{accountTotal}}</span>
            </span>
          </div>
          <div class="comment-body">
            <div class="table-head">
              <span class="head-item id-item">编号</span>
              <span class="head-item account-item tc">金额（元）</span>
              <span class="head-item time-item tc">提交时间</span>
              <span class="head-item type-item tc">类型</span>
              <span class="head-item desc-item tc">描叙</span>
            </div>
            <table>
              <tr v-for="(item,i) in records" :key="i">
                <td width="100" class="goodsName">{{ item.id }}</td>
                <td width="150" class="tc" :class="item.amount > 0 ? 'red' : 'green'">
                  <span v-if="item.amount > 0">+</span>
                  {{ item.amount }}
                </td>
                <td width="140" class="tc">
                  {{ item.createTime }}
                </td>
                <td width="150" class="tc">
                  {{ typeMap[item.payTradeType] }}
                </td>
                <td class="tc acc-desc">
                  <p v-if="item.payTradeType == 1">订单编号：{{ item.orderNumber }}交易成功</p>
                  <p v-if="item.payTradeType == 2">订单编号：{{ item.orderNumber }}退款成功资金将原路返回买家</p>
                  <p v-if="item.payTradeType == 5">审核通过，具体到账时间以银行到账时间为准</p>
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div class="page-pagination" v-if="records && records.length">
          <el-pagination class="tc list-pagination" background @current-change="handleCurrentChange"
            :current-page="params.offset" :page-size="params.limit" layout="prev, pager, next, jumper" :total="total">
          </el-pagination>
        </div>
        <div class="no-comment tc" v-if="records && !records.length">
          <img src="/src/img/user/no_content.png" alt="">
          <p>暂无内容</p>
        </div>

      </div>
    </div>
  </div>

  <%- include ../footer.ejs %>

</body>
<script>
  $(".userLeftNav li[data-target='accDetails']").addClass("cur");
  var routerVm = new Vue({
    el: "#router"
  })
  var applyVm = new Vue({
    el: "#main",
    data: {
      total: 0,
      params: {
        limit: 7,
        offset: 1
      },
      typeMap: {
        1: '支付成功',
        2: '退款成功',
        5: '提现成功',
      },
      accountTotal: '',
      records: [{
        commentRank: '',
        commentType: '',
        content: '',
        createTime: '',
        goodsName: '',
        id: '',
        idValue: '',
        userId: '',
        userLogo: '',
        userName: ''
      }]
    },
    mounted: function () {
      this.getList()
      this.getTotal()
    },
    methods: {
      getList() {
        utils.ajax({
          type: 'get',
          url: '/api/userCenter/accountDetail',
          data: this.params,
          success: res => {
            this.records = res.data.records
            this.total = res.data.total
          }
        })
      },
      getTotal() {
        utils.ajax({
          type: 'get',
          url: '/api/pay/user_account/info',
          success: res => {
            this.accountTotal = res.data.amount
          }
        })
      },
      handleCurrentChange(val) {
        this.params.offset = val
        this.getList()
      },
      deleteItemEvaluate(id) {}
    }
  })
</script>

</html>