<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <title>中宝协</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        body {
            background: #fff;
            font-size: 12px;
            color: #333;
            position: relative;
        }

        ul {
            list-style: none;
        }

        img {
            border: none;
        }

        a {
            text-decoration: none;
        }

        h4 {
            font-style: normal;
        }

        .clear {
            clear: both;
        }

        .clearfix:after {
            content: ".";
            display: block;
            clear: both;
            height: 0;
            overflow: hidden;
        }

        .clearfix {
            zoom: 1;
        }

        .section {
            text-align: center;
            font: 50px "Microsoft Yahei";
            color: #fff;
        }

        .fp-tableCell {
            display: block;
        }

        .pageOne {}

        .pageOne .banner {
            display: block;
            width: 100%;
            height: auto;
            margin: 0;
            padding: 0;
            v-align: bottom;
        }

        .formBox {
            padding-top: 150px;
            background-image: url("../../src/img/preferential/h5images/form_bj.png");
            background-position: top;
            background-repeat: no-repeat;
            background-size: 100% auto;
            padding-left: 10%;
            padding-right: 10%;
        }

        .formBox .form {
            background-color: #fff;
            box-shadow: 0 0 180px #e2c3ba;
            min-height: 100px;
            margin: 0 auto;
            border-radius: 60px;
            padding-bottom: 60px;
            padding-left: 10%;
            padding-right: 10%;
        }

        .formBox .form .form-title {
            font-size: 68px;
            color: #d88f7b;
            text-align: left;
            margin: 0 auto;
            height: 170px;
            line-height: 170px;
        }

        .formBox .form .from-phone {
            margin: 0 auto;
            height: 128px;
            line-height: 128px;
            background-color: #fcf9f9;
            padding: 0 50px;
            border-radius: 50px;
        }

        .formBox .form .from-phone .icon {
            width: 16%;
            height: 100%;
            display: block;
            float: left;
        }

        .formBox .form .from-phone input {
            width: 84%;
            height: 100%;
            border: none;
            display: block;
            float: left;
            background-color: initial;
            outline: none;
            font-size: 38px;
            color: #333;
        }

        .formBox .form .from-Password {
            margin: 0 auto;
            height: 128px;
            line-height: 128px;
            background-color: #fcf9f9;
            padding: 0 50px;
            border-radius: 50px;
            margin-top: 40px;
        }

        .formBox .form .from-Password .icon {
            width: 16%;
            height: 100%;
            display: block;
            float: left;
        }

        .formBox .form .from-Password input {
            width: 84%;
            height: 100%;
            border: none;
            display: block;
            float: left;
            background-color: initial;
            outline: none;
            font-size: 38px;
            color: #333;
        }

        input::-webkit-input-placeholder {
            color: #a6a6a6;
        }

        input::-moz-placeholder {
            color: #a6a6a6;
        }

        input:-moz-placeholder {
            color: #a6a6a6;
        }

        input:-ms-input-placeholder {
            color: #a6a6a6;
        }

        .formBox .form .from-VerificationCode {
            margin: 0 auto;
            height: 128px;
            line-height: 128px;
            background-color: #fcf9f9;
            padding: 0 50px;
            border-radius: 50px;
            margin-top: 40px;
            overflow: hidden;
        }

        .formBox .form .from-VerificationCode .icon {
            width: 16%;
            height: 100%;
            display: block;
            float: left;
        }

        .formBox .form .from-VerificationCode input {
            width: 44%;
            height: 100%;
            border: none;
            display: block;
            float: left;
            background-color: initial;
            outline: none;
            font-size: 38px;
            color: #333;
        }

        .formBox .form .from-VerificationCode .button {
            width: 36%;
            float: right;
            position: relative;
        }

        .formBox .form .from-VerificationCode .button .shu {
            width: 2px;
            height: 80px;
            background-color: #eee2de;
            position: absolute;
            left: 0px;
            top: 24px;
        }

        .formBox .form .from-VerificationCode .button button {
            width: 100%;
            height: 100%;
            color: #999;
            font-size: 32px;
            line-height: 128px;
            text-align: right;
            display: block;
            background-color: initial;
            border: none;
            outline: none;
        }

        .formBox .form .prompt {
            height: 60px;
            line-height: 70px;
            text-align: left;
            padding-left: 50px;
            color: #dca08f;
            font-size: 32px;
        }

        .formBox .form .form-button {
            display: block;
            height: 104px;
            line-height: 104px;
            color: #fff;
            text-align: center;
            width: 94%;
            margin: 0 auto;
            background-image: url("../../src/img/preferential/h5images/form_button.png");
            background-size: 100% 100%;
            margin-top: 30px;
        }

        .formBox .form .form-button_ {
            background-image: url("../../src/img/preferential/h5images/form_button_.png");
        }

        .arrowIcon {
            width: 59px;
            height: 100px;
            margin: 0 auto;
            margin-top: 74px;
            position: relative;
        }

        .arrowIcon img {
            width: 59px;
            height: 59px;
            display: block;
            animation: myfirst 2s infinite;
            -moz-animation: myfirst 2s infinite;
            /* Firefox */
            -webkit-animation: myfirst 2s infinite;
            /* Safari 和 Chrome */
            -o-animation: myfirst 2s infinite;
            /* Opera */
            position: absolute;
            left: 0;
            top: 0;
        }

        @keyframes myfirst {
            0% {
                top: 0;
            }

            60% {
                top: 40px;
            }

            100% {
                top: 0;
            }
        }

        @-moz-keyframes myfirst

        /* Firefox */
            {
            0% {
                top: 0;
            }

            60% {
                top: 40px;
            }

            100% {
                top: 0;
            }
        }

        @-webkit-keyframes myfirst

        /* Safari 和 Chrome */
            {
            0% {
                top: 0;
            }

            60% {
                top: 40px;
            }

            100% {
                top: 0;
            }
        }

        @-o-keyframes myfirst

        /* Opera */
            {
            0% {
                top: 0;
            }

            60% {
                top: 40px;
            }

            100% {
                top: 0;
            }
        }

        .pageOne .page-img {
            display: block;
            width: 100%;
            height: auto;
        }

        .pageOne .cont-title {
            display: block;
            width: 100%;
            height: auto;
        }

        .pageOne .cont-subheading {
            color: #e4c8c0;
            font-size: 36px;
            margin-top: 10px;
            margin-bottom: 66px;
        }

        .pageOne .contTop {
            margin-bottom: 60px;
        }

        .pageOne .contTop .left {
            width: 50%;
            float: left;
            position: relative;
        }

        .pageOne .contTop .left .Zero {
            display: block;
            width: 100%;
            height: auto;
        }

        .pageOne .contTop .left .img-dl {
            display: block;
            width: 100%;
            height: auto;
        }

        .pageOne .contTop .left .dl {
            margin-right: 20%;
            text-align: right;
            margin-top: 40px;
        }

        .pageOne .contTop .left .dd2 {
            font-size: 54px;
            color: #555;
        }

        .pageOne .contTop .left .dd1 {
            font-size: 60px;
            color: #333;
            margin-bottom: 10px;
        }

        .pageOne .contTop .left .dl_ {
            margin-left: 16%;
            text-align: left;
            margin-top: 46px;
            margin-right: 0;
        }

        .pageOne .footer img {
            width: 100%;
            height: auto;
            display: block;
            margin-top: 130px;
        }

        .hiddened {
            visibility: hidden;
        }

        .hidden {
            display: none;
            color: #0000FF;
        }

        .hidden {
            display: block;
        }

        /*非iphoneX的样式*/
        .pageTwo .formBox {
            padding-top: 86px;
        }

        .pageTwo .formBox .form .form-title {
            height: 170px;
            line-height: 170px;
        }

        .pageTwo .formBox .form .form-button {
            margin-top: 0px;
        }
    </style>
    <script src="../../src/js/js/jquery-1.8.3.min.js"></script>
    <script src="../../dist/js/lib.js"></script>
    <script>
        $(function () {
            $(window).scroll(function () {
                var scrollY = $(document).scrollTop(); // 获取垂直滚动的距离，即滚动了多少
                if (scrollY > 50) { //如果滚动距离大于550px则隐藏，否则删除隐藏类
                    $('.arrowIcon').addClass('hiddened');
                } else {
                    $('.arrowIcon').removeClass('hiddened');
                }
            });

            if (/iphone/gi.test(navigator.userAgent) && (screen.height == 812 && screen.width == 375)) {
                //是iphoneX
            } else {
                $('.pageOne').addClass('pageTwo');
            }


            var code = ""; //接收验证码
            $('#code-btn').click(function () {
                var count = 60;
                var phone = $("#phone").val(); //手机号码
                if (phone === "") {
                    $('.prompt').html('手机号不能为空');
                }

                //向后台发送处理数据
                $.ajax({
                    type: "POST", //用POST方式传输
                    url: "http://api.chinahongchao.cn/user/accounth5/sendValicode", //目标地址
                    dataType: 'json',
                    data: ({
                        "phone": phone,
                        "type": 1
                    }),
                    success: function (msg) {
                        if (msg.code === 30020) {
                            $('.prompt').html('手机号格式错误');
                            return false;
                        } else if (msg.code === 30010) {
                            $('.prompt').html('短信发送失败');
                            return false;
                        } else if (msg.code === 20000) {
                            //开始计时
                            $("#code-btn").attr('disabled', 'disabled');
                            $("#code-btn").html("倒计时" + count + "秒");
                            var timer = setInterval(function () {
                                count--;
                                $("#code-btn").html("倒计时" + count + "秒");
                                if (count == 0) {
                                    clearInterval(timer);
                                    $("#code-btn").attr("disabled", false); //启用按钮
                                    $("#code-btn").html("重新发送验证码");
                                    code = ""; //清除验证码。如果不清除，过时间后，输入收到的验证码依然有效
                                }
                            }, 1000);
                        }
                    },
                    error: function (error) {
                        console.log(error)

                    }
                });

            });


            $('#form-button').click(function () {
                var phone = $("#phone").val()
                var Password = $("#Password").val();
                var checkCode = $("#checkCode").val();
                if (phone === "") {
                    $('.prompt').html('手机号不能为空');
                    return false;
                } else if (checkCode === "") {
                    $('.prompt').html('验证码不能为空');
                    return false;
                } else if (Password === "") {
                    $('.prompt').html('密码不能为空');
                    return false;
                } else if (Password.length < 6 || Password.length > 12) {
                    $('.prompt').html('密码必须为6-12位');
                    return false;
                } else {
                    $('.prompt').html('');
                }
                (function ($) {
                    $.getUrlParam = function (name) {
                        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
                        var r = window.location.search.substr(1).match(reg);
                        if (r != null) return unescape(r[2]);
                        return null;
                    }
                })(jQuery);
                var sourceCode = $.getUrlParam('source');

                $.ajax({
                    type: "POST",
                    url: "http://api.chinahongchao.cn/user/accounth5/register",
                    dataType: 'json',
                    data: {
                        "phone": phone,
                        "pwd": Password,
                        "valicode": checkCode,
                        "registerType": sourceCode
                    },
                    success: function (data) {
                        if (data.code === 21000) { //根据返回值进行提示
                            $('.prompt').html('验证码错误');
                        } else if (data.code === 22004) {
                            $('.prompt').html('手机号已被使用');
                        } else if (data.code === 30020) {
                            $('.prompt').html('手机号格式错误');
                        } else if (data.code === 20000) {
                            var u = navigator.userAgent;
                            var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') >
                                -1; //android终端
                            var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
                            if (isAndroid) {
                                window.location.href =
                                    'https://image.xiaotaotv.com/app/hc.apk';
                            } else if (isiOS) {
                                window.location.href =
                                    'https://itunes.apple.com/cn/app/id1445419628';
                            } else {
                                window.location.href = 'http://www.chinahongchao.cn/';
                            }

                            $.ajax({
                                type: "GET",
                                url: "/api/userCenter/addHongChaoRecord",
                                dataType: 'json',
                                data: {
                                    "phone": phone,
                                    "registerType": sourceCode
                                },
                                success: function (data) {
                                    console.log(data)
                                },
                                error: function (error) {
                                    console.log(error)
                                }
                            })
                        }
                    },
                    error: function (error) {
                        console.log(error)
                    }
                });
            })
        });
    </script>
</head>

<body>
    <div class="section pageOne">
        <img class="banner" src="../../src/img/preferential/h5images/banner.png" />
        <div class="formBox">
            <div class="form">
                <div class="form-title">注册</div>
                <div class="from-phone">
                    <img class="icon" src="../../src/img/preferential/h5images/form_icon1.png" />
                    <input id="phone" type="text" name="phone" placeholder="请输入手机号" maxlength="11"
                        onkeyup="this.value=this.value.replace(/\D/g,'')" />
                </div>
                <div class="from-VerificationCode">
                    <img class="icon" src="../../src/img/preferential/h5images/form_icon2.png" />
                    <input class="input" id="checkCode" type="text" name="code" placeholder="请输入验证码" />
                    <div class="button">
                        <div class="shu"></div>
                        <button type="button" id="code-btn">获取验证码</button>
                    </div>
                </div>
                <div class="from-Password">
                    <img class="icon" src="../../src/img/preferential/h5images/form_icon2.png" />
                    <input id="Password" type="text" name="Password" placeholder="请输入6-12位密码" maxlength="12" />
                </div>
                <div class="prompt"></div>
                <!--<div class="form-button form-button_ " id="form-button_">立即下载</div>-->
                <a class="form-button" id="form-button">立即下载</a>
                <!--<a class="form-button" id="form-button" href="https://image.xiaotaotv.com/app/hc.apk">立即下载</a>-->
            </div>
        </div>
        <div class="arrowIcon">
            <img src="../../src/img/preferential/h5images/icon.png" />
        </div>
        <img class="page-img" src="../../src/img/preferential/h5images/img1.png" />
        <img class="cont-title" src="../../src/img/preferential/h5images/page2Title.png" />
        <div class="cont-subheading">中宝协旗下产品100%正品保证</div>
        <div class="contTop clearfix">
            <div class="left"><img class="Zero" src="../../src/img/preferential/h5images/page2-img1.png" /></div>
            <div class="left">
                <img class="img-dl" src="../../src/img/preferential/h5images/page2-img2.png" />
                <div class="dl">
                    <div class="dd1">东海水晶</div>
                    <div class="dd2">祖母绿璀璨系列</div>
                </div>
            </div>
        </div>
        <div class="contTop clearfix">
            <div class="left">
                <img class="img-dl" src="../../src/img/preferential/h5images/page2-img3.png" />
                <div class="dl dl_">
                    <div class="dd1">珍世缘</div>
                    <div class="dd2">淡水珍珠系列</div>
                </div>
            </div>
            <div class="left"><img class="Zero" src="../../src/img/preferential/h5images/page2-img4.png" /></div>
        </div>
        <div class="footer">
            <img src="../../src/img/preferential/h5images/page2-img5.png" />
        </div>
    </div>
</body>

</html>