webpackJsonp([52],{ApZz:function(e,t,r){var a=r("UEpa");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("rjj0")("6cee60bd",a,!0)},GgXT:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Xxa5"),o=r.n(a),n=r("//Fk"),c=r.n(n),i=r("d7EF"),s=r.n(i),l=r("exGp"),d=r.n(l),m=r("cAgV"),u=r("TAej"),g=r("5aCZ"),f=r("kFM0"),p=r("ShqB"),y=r("oyZn"),h=r("Q0Ca"),v={directives:{waves:m.a},computed:{},data:function(){return{rules:{recycleName:[{required:!0,message:"请输入回收标题",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],categoryId:[{required:!0,message:"请选择分类",trigger:"blur"}],recycleDesc:[{required:!0,message:"请填写描述",trigger:"blur"}],imgUrl:[{required:!0,message:"请上传图片",trigger:"blur"}]},categories:[],selectedCategory:[],loading:!1,form:{id:void 0,categoryId:void 0,recycleName:void 0,imgUrl:"",recycleDesc:""},editStatus:!0}},beforeRouteEnter:function(e,t,r){var a=this;return d()(o.a.mark(function t(){var n,i,l,d,m,u;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=[y.c.get()],e.query.id&&(n.push(Object(p.c)(e.query.id).then(function(e){return e.data})),n.push(Object(f.c)(e.query.id).then(function(e){return e.data?e.data.goodsDesc:""}))),t.next=4,c.a.all(n);case 4:i=t.sent,l=s()(i,3),d=l[0],m=l[1],u=l[2],r(function(e){setTimeout(function(){e.categories=d,m&&(e.form=m,e.form.goodsDesc=u,e.selectedCategory=y.c.getParentId(e.form.categoryId))},10)});case 10:case"end":return t.stop()}},t,a)}))()},beforeRouteLeave:function(e,t,r){this.onbeforeunloadHandler(r)},methods:{onbeforeunloadHandler:function(e){this.editStatus?window.confirm("确定要放弃当前的操作吗？")?e():e(!1):e()},handleDelete:function(){this.form.imgUrl=""},getImageStyle:function(){return{backgroundImage:"url("+Object(h.setImg)(this.form.imgUrl,{w:500})+")"}},goodsUploadSuccess:function(e){this.form.imgUrl=e[0].key},save:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return e.$notify({title:"警告",message:"请务必填写必选项",type:"warning"}),!1;e.loading=!0,e.form.swapble=+e.form.swapble,Object(p.e)(e.form).then(function(t){e.editStatus=!1,e.$notify({title:"成功",message:"提交成功",type:"success",duration:2e3}),e.$router.push({name:"recyclingInfo"}),e.loading=!1}).catch(function(){e.loading=!1})})},handleChange:function(e){this.form.categoryId=e[e.length-1]}},components:{ImageUpload:u.a,Tinymce:g.a}},b={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container",staticStyle:{"padding-right":"40px"}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"回收标题",prop:"recycleName"}},[r("el-input",{attrs:{placeholder:"请输入回收标题"},model:{value:e.form.recycleName,callback:function(t){e.$set(e.form,"recycleName",t)},expression:"form.recycleName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"分类",prop:"categoryId"}},[r("el-cascader",{attrs:{options:e.categories,props:{value:"id",label:"catName"}},on:{change:e.handleChange},model:{value:e.selectedCategory,callback:function(t){e.selectedCategory=t},expression:"selectedCategory"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"图片",prop:"imgUrl"}},[r("el-row",{directives:[{name:"show",rawName:"v-show",value:e.form.imgUrl,expression:"form.imgUrl"}],staticClass:"row"},[r("el-col",{staticClass:"col",attrs:{span:6}},[r("el-card",{attrs:{"body-style":{padding:"0px"}}},[r("a",{staticClass:"image",style:e.getImageStyle(),attrs:{target:"_blank",href:e._f("setImg")(e.form.imgUrl)}}),e._v(" "),r("div",{staticStyle:{padding:"14px"}},[r("div",{staticClass:"bottom clearfix"},[r("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(t){e.handleDelete()}}})],1)])])],1)],1),e._v(" "),r("ImageUpload",{attrs:{multiple:!1,prefix:"swap"},on:{successCBK:e.goodsUploadSuccess}})],1),e._v(" "),r("el-form-item",{attrs:{label:"描述",prop:"recycleDesc"}},[r("Tinymce",{ref:"editor",attrs:{height:500},model:{value:e.form.recycleDesc,callback:function(t){e.$set(e.form,"recycleDesc",t)},expression:"form.recycleDesc"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.save}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var x=r("VU/8")(v,b,!1,function(e){r("ApZz")},"data-v-e2c48806",null);t.default=x.exports},UEpa:function(e,t,r){(e.exports=r("FZ+f")(!1)).push([e.i,"\n.image[data-v-e2c48806]{\n  display: block;\n  max-width: 100%;\n  padding-bottom: 100%;\n  height: 0;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.row[data-v-e2c48806] {\n  position: relative;\n  left: -20px;\n  margin-top: 10px;\n}\n.col[data-v-e2c48806] {\n  margin-bottom: 20px;\n  margin-left: 20px;\n  max-width: 22.8%;\n  max-height: 400px;\n}\n",""])}});