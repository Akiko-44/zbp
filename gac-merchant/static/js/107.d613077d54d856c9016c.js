webpackJsonp([107],{"5aCZ":function(e,t,n){"use strict";var r=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime legacyoutput link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],i=["bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap\t preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],a={name:"tinymce",components:{ImageUpload:n("TAej").a},props:{id:{type:String},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{default:"file edit insert view format table"},height:{type:Number,required:!1,default:360}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id||"vue-tinymce-"+ +new Date,fullscreen:!1}},watch:{value:function(e){var t=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(t.tinymceId).setContent(e||"")})}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},methods:{initTinymce:function(){var e=this,t=this;window.tinymce.init({selector:"#"+this.tinymceId,language:"zh_CN",height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:i,menubar:this.menubar,plugins:r,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,init_instance_callback:function(n){t.value&&n.setContent(t.value),t.hasInit=!0,n.on("NodeChange Change KeyUp SetContent",function(){e.hasChange=!0,e.$emit("input",n.getContent())})},setup:function(e){e.on("FullscreenStateChanged",function(e){t.fullscreen=e.state})}})},destroyTinymce:function(){window.tinymce.get(this.tinymceId)&&window.tinymce.get(this.tinymceId).destroy()},setContent:function(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(e){var t=this;e.forEach(function(e){window.tinymce.get(t.tinymceId).insertContent('<img class="wscnph" src="'+e.url+'" >')})}},destroyed:function(){this.destroyTinymce()}},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tinymce-container editor-container",class:{fullscreen:this.fullscreen}},[t("textarea",{staticClass:"tinymce-textarea",attrs:{id:this.tinymceId}}),this._v(" "),t("div",{staticClass:"editor-custom-btn-container"},[t("ImageUpload",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:this.imageSuccessCBK}})],1)])},staticRenderFns:[]};var s=n("VU/8")(a,o,!1,function(e){n("nprw")},"data-v-313878aa",null);t.a=s.exports},"7rdf":function(e,t,n){"use strict";t.a=function(e){return Object(r.a)({url:"/admin/designmanu/case/audit",method:"post",data:e})},t.d=function(e,t){return Object(r.a)({url:"/admin/designmanu/case/page",method:"post",data:e,params:t})},t.c=function(e){return Object(r.a)({url:"/admin/designmanu/merchant/case/info/"+e,method:"get"})},t.b=function(e){return Object(r.a)({url:"/api/designmanu/designroom/case/category/list/"+e+" ",method:"get"})};var r=n("vLgD")},EHY9:function(e,t,n){var r=n("YxOl");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n("rjj0")("2c5e7629",r,!0)},EKKS:function(e,t,n){"use strict";t.e=function(e,t){return Object(r.a)({url:"/admin/designmanu/merchant/designer/page",method:"post",data:e,params:t})},t.d=function(e){return Object(r.a)({url:"/admin/designmanu/designer/info/"+e,method:"get"})},t.c=function(){return Object(r.a)({url:"/api/userCenter/merchantInfo/info",method:"get"})},t.b=function(e){return Object(r.a)({url:"/admin/designmanu/designer/delete/"+e,method:"post"})},t.f=function(e){return Object(r.a)({url:"/admin/designmanu/merchant/designer/saveOrUpdate",method:"post",data:e})},t.a=function(){return Object(r.a)({url:"/admin/designmanu/designer/ageLimitMap",method:"get"})};var r=n("vLgD")},N0Ja:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\n.tinymce-container[data-v-313878aa] {\n  position: relative;\n}\n.tinymce-container[data-v-313878aa] .mce-fullscreen {\n  z-index: 10000;\n}\n.tinymce-textarea[data-v-313878aa] {\n  visibility: hidden;\n  z-index: -1;\n}\n.editor-custom-btn-container[data-v-313878aa] {\n  position: absolute;\n  right: 4px;\n  top: -1px;\n  /*z-index: 2005;*/\n}\n.fullscreen .editor-custom-btn-container[data-v-313878aa] {\n  z-index: 10000;\n  position: fixed;\n}\n.editor-upload-btn[data-v-313878aa] {\n  display: inline-block;\n}\n",""])},SldL:function(e,t){!function(t){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag",l="object"==typeof e,u=t.regeneratorRuntime;if(u)l&&(e.exports=u);else{(u=t.regeneratorRuntime=l?e.exports:{}).wrap=w;var d="suspendedStart",f="suspendedYield",p="executing",m="completed",h={},g={};g[o]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==r&&i.call(y,o)&&(g=y);var b=j.prototype=x.prototype=Object.create(g);_.prototype=b.constructor=j,j.constructor=_,j[c]=_.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,j):(e.__proto__=j,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(b),e},u.awrap=function(e){return{__await:e}},C(O.prototype),O.prototype[s]=function(){return this},u.AsyncIterator=O,u.async=function(e,t,n,r){var i=new O(w(e,t,n,r));return u.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},C(b),b[c]="Generator",b[o]=function(){return this},b.toString=function(){return"[object Generator]"},u.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},u.values=E,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return s.type="throw",s.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),h}}}function w(e,t,n,r){var i=t&&t.prototype instanceof x?t:x,a=Object.create(i.prototype),o=new N(r||[]);return a._invoke=function(e,t,n){var r=d;return function(i,a){if(r===p)throw new Error("Generator is already running");if(r===m){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=L(o,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=k(e,t,n);if("normal"===c.type){if(r=n.done?m:f,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=m,n.method="throw",n.arg=c.arg)}}}(e,n,o),a}function k(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function x(){}function _(){}function j(){}function C(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function O(e){var t;this._invoke=function(n,r){function a(){return new Promise(function(t,a){!function t(n,r,a,o){var s=k(e[n],e,r);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==typeof l&&i.call(l,"__await")?Promise.resolve(l.__await).then(function(e){t("next",e,a,o)},function(e){t("throw",e,a,o)}):Promise.resolve(l).then(function(e){c.value=e,a(c)},o)}o(s.arg)}(n,r,t,a)})}return t=t?t.then(a,a):a()}}function L(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,L(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var i=k(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return a.next=a}}return{next:T}}function T(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},TAej:function(e,t,n){"use strict";var r=n("//Fk"),i=n.n(r),a=n("fZjL"),o=n.n(a),s=n("Zg3+");var c={name:"ImageUpload",props:{color:{type:String,default:"#1890ff"},multiple:{type:Boolean,default:!0},prefix:{type:String,default:"pic"},checkFile:{type:Function,default:function(){}},accept:{type:String,default:"image/*"},uploadUrl:{type:String,default:s.d}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[],uploadData:{}}},methods:{checkAllSuccess:function(){var e=this;return o()(this.listObj).every(function(t){return e.listObj[t].hasSuccess})},handleSubmit:function(){var e=this,t=o()(this.listObj).map(function(t){return e.listObj[t]});0!==t.length?this.checkAllSuccess()?(this.$emit("successCBK",t),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("请等待所有图片上传成功 或 出现了网络问题，请刷新页面重新上传！"):this.$message("请上传图片")},handleSuccess:function(e,t){for(var n=t.uid,r=o()(this.listObj),i=0,a=r.length;i<a;i++)if(this.listObj[r[i]].uid===n)return this.listObj[r[i]].url=s.a+"/"+e.key,this.listObj[r[i]].key=e.key,void(this.listObj[r[i]].hasSuccess=!0)},handleError:function(e,t,n){this.handleRemove(t),this.$message({message:e,showClose:!0,type:"error"})},handleRemove:function(e){for(var t=e.uid,n=o()(this.listObj),r=0,i=n.length;r<i;r++)if(this.listObj[n[r]].uid===t)return void delete this.listObj[n[r]]},beforeUpload:function(e){var t=this,n=this,r=e.uid;return this.listObj[r]={},new i.a(function(i,a){Object(s.c)().then(function(o){!function(e,t){var n=window.URL||window.webkitURL,r=new Image;r.src=n.createObjectURL(e),r.onload=function(){t&&t(r),n.revokeObjectURL(r.src)}}(e,function(c){n.uploadData={key:Object(s.b)(n.prefix,c.width,c.height,e.type.split("/")[1]),token:o,fname:e.name};var l=n.checkFile(e,c);if("string"==typeof l)t.$message({message:l,showClose:!0,type:"warning"}),a();else{var u={hasSuccess:!1,uid:r,width:c.width,height:c.height};n.listObj[r]=u,i(!0)}})})})}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"upload-container"},[n("el-button",{style:{background:e.color,borderColor:e.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("上传图片\n  ")]),e._v(" "),n("el-dialog",{attrs:{"append-to-body":"",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-upload",{staticClass:"editor-slide-upload",attrs:{action:e.uploadUrl,multiple:e.multiple,"file-list":e.fileList,"show-file-list":!0,"list-type":"picture-card","on-remove":e.handleRemove,"on-success":e.handleSuccess,"on-error":e.handleError,"before-upload":e.beforeUpload,data:e.uploadData,accept:e.accept}},[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1),e._v(" "),n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var u=n("VU/8")(c,l,!1,function(e){n("EHY9")},"data-v-0f37f45a",null);t.a=u.exports},Xxa5:function(e,t,n){e.exports=n("jyFz")},YxOl:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\n.editor-slide-upload[data-v-0f37f45a] {\n  margin-bottom: 20px;\n}\n.editor-slide-upload[data-v-0f37f45a] .el-upload--picture-card {\n    width: 100%;\n}\n",""])},cAgV:function(e,t,n){"use strict";var r=n("woOf"),i=n.n(r),a=(n("ctMr"),{bind:function(e,t){e.addEventListener("click",function(n){var r=i()({},t.value),a=i()({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},r),o=a.ele;if(o){o.style.position="relative",o.style.overflow="hidden";var s=o.getBoundingClientRect(),c=o.querySelector(".waves-ripple");switch(c?c.className="waves-ripple":((c=document.createElement("span")).className="waves-ripple",c.style.height=c.style.width=Math.max(s.width,s.height)+"px",o.appendChild(c)),a.type){case"center":c.style.top=s.height/2-c.offsetHeight/2+"px",c.style.left=s.width/2-c.offsetWidth/2+"px";break;default:c.style.top=n.pageY-s.top-c.offsetHeight/2-document.body.scrollTop+"px",c.style.left=n.pageX-s.left-c.offsetWidth/2-document.body.scrollLeft+"px"}return c.style.backgroundColor=a.color,c.className="waves-ripple z-active",!1}},!1)}}),o=function(e){e.directive("waves",a)};window.Vue&&(window.waves=a,Vue.use(o)),a.install=o;t.a=a},cMBj:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\n.image[data-v-73da6528] {\n  display: block;\n  max-width: 100%;\n  height: 200px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.danger[data-v-73da6528] {\n  color: #F56C6C;\n}\n.el-col-6[data-v-73da6528] {\n  margin-bottom: 20px;\n}\n.my-autocomplete li[data-v-73da6528] {\n  line-height: normal;\n  padding: 7px;\n}\n.my-autocomplete li .name[data-v-73da6528] {\n    text-overflow: ellipsis;\n    overflow: hidden;\n}\n.my-autocomplete li .addr[data-v-73da6528] {\n    font-size: 12px;\n    color: #b4b4b4;\n}\n.my-autocomplete li .highlighted .addr[data-v-73da6528] {\n    color: #ddd;\n}\n.right-nav[data-v-73da6528] {\n  position: fixed;\n  right: 0;\n  top: 150px;\n}\n",""])},ctMr:function(e,t,n){var r=n("z4F4");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n("rjj0")("6077c87a",r,!0)},exGp:function(e,t,n){"use strict";t.__esModule=!0;var r,i=n("//Fk"),a=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){return function(){var t=e.apply(this,arguments);return new a.default(function(e,n){return function r(i,o){try{var s=t[i](o),c=s.value}catch(e){return void n(e)}if(!s.done)return a.default.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}},jyFz:function(e,t,n){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,a=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n("SldL"),i)r.regeneratorRuntime=a;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},mjH6:function(e,t,n){var r=n("cMBj");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n("rjj0")("273f7b84",r,!0)},nprw:function(e,t,n){var r=n("N0Ja");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n("rjj0")("7c2a7338",r,!0)},wt7r:function(e,t,n){"use strict";t.d=function(e,t){return Object(r.a)({url:"/admin/designmanu/merchant/case/page",method:"post",data:e,params:t})},t.b=function(e){return Object(r.a)({url:"/admin/designmanu/merchant/case/info/"+e,method:"get"})},t.a=function(e){return Object(r.a)({url:"/admin/designmanu/merchant/case/delete/"+e,method:"post"})},t.e=function(e){return Object(r.a)({url:"/admin/designmanu/merchant/case/saveOrUpdate",method:"post",data:e})},t.c=function(e,t){return Object(r.a)({url:"/admin/designmanu/merchant/case/onOrOff/"+e+"/"+t,method:"post"})};var r=n("vLgD")},z4F4:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,".waves-ripple {\n    position: absolute;\n    border-radius: 100%;\n    background-color: rgba(0, 0, 0, 0.15);\n    background-clip: padding-box;\n    pointer-events: none;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    -webkit-transform: scale(0);\n    transform: scale(0);\n    opacity: 1;\n}\n\n.waves-ripple.z-active {\n    opacity: 0;\n    -webkit-transform: scale(2);\n    transform: scale(2);\n    -webkit-transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, transform 0.6s ease-out, -webkit-transform 0.6s ease-out;\n}",""])},zjYK:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("Xxa5"),i=n.n(r),a=n("exGp"),o=n.n(a),s=n("cAgV"),c=n("TAej"),l=n("Q0Ca"),u=n("Zg3+"),d=n("5aCZ"),f=n("wt7r"),p=n("EKKS"),m=n("7rdf"),h={directives:{waves:s.a},components:{ImageUpload:c.a,Tinymce:d.a},data:function(){return{domain:u.a,categories:[],loading:!1,form:{id:void 0,caseName:void 0,subtitle:void 0,keywords:void 0,secondaryCgyId:void 0,secondaryCgyName:void 0,price:null,originalPrice:null,designerId:void 0,designerName:void 0,designConcept:void 0,freightPrice:void 0,stock:void 0,stockType:"1",caseInfo:void 0,goodsSource:5,picUrlList:[],caseAttrsDTOList:[]},rules:{caseName:[{required:!0,message:"请输入商品名",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],designerName:[{required:!0,message:"请输入设计师姓名",trigger:"blur"}],keywords:[{required:!0,message:"请输入商品关键字",trigger:"blur"}],price:[{required:!0,message:"请输入商品价格",trigger:"blur"}],originalPrice:[{required:!0,message:"请输入商品原价",trigger:"blur"}],designConcept:[{required:!0,message:"请输入设计理念",trigger:"blur"}],stock:[{required:!0,message:"请输入库存",trigger:"blur"}],freightPrice:[{required:!0,message:"请选择运费",trigger:"change"}],caseInfo:[{required:!0,message:"请输入商品详情",trigger:"blur"}],picUrlList:[{required:!0,message:"请上传商品图片",type:"array",trigger:"blur"}],caseAttrsDTOList:[{required:!0,message:"请添加商品参数",type:"array",trigger:"blur"}],secondaryCgyId:[{required:!0,message:"请选择分类",trigger:"blur"}]},editStatus:!0,timeout:null}},beforeRouteLeave:function(e,t,n){this.onbeforeunloadHandler(n)},beforeRouteEnter:function(e,t,n){var r=this;return o()(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=void 0,!e.query.id){t.next=5;break}return t.next=4,Object(f.b)(e.query.id).then(function(e){return e.data});case 4:a=t.sent;case 5:n(function(e){setTimeout(function(){a&&(e.form=a)},10)});case 6:case"end":return t.stop()}},t,r)}))()},created:function(){this.getCategory()},methods:{getCategory:function(){var e=this;return o()(i.a.mark(function t(){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(m.b)(0);case 2:n=t.sent,e.categories=n.data;case 4:case"end":return t.stop()}},t,e)}))()},categoryChange:function(e){for(var t=this.categories.length,n=0;n<t;n++)if(this.categories[n].id===e)return void(this.form.secondaryCgyName=this.categories[n].name)},save:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return e.$notify({title:"警告",message:"请务必填写必选项",type:"warning"}),!1;e.loading=!0,Object(f.e)(e.form).then(function(t){e.editStatus=!1,e.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),e.$router.push({name:"worksList"}),e.loading=!1}).catch(function(){e.loading=!1})})},reset:function(){this.$refs.form.resetFields()},getImageStyle:function(e){return{backgroundImage:"url("+Object(l.setImg)(e,{w:500})+")"}},workUploadSuccess:function(e){var t=this;e.forEach(function(e){var n=e.key;t.form.picUrlList.push(n)})},onbeforeunloadHandler:function(e){this.editStatus?window.confirm("确定要放弃当前的操作吗？")?e():e(!1):e()},querySearchAsync:function(e,t){clearTimeout(this.timeout),this.timeout=setTimeout(function(){Object(p.e)({flag:0,userName:e,size:20}).then(function(e){return e.data.records}).then(function(e){t(e)})},100)},handleDesignerSelect:function(e){this.form.designerId=e.id,this.form.designerName=e.userName},tabClick:function(e){var t=document.querySelector(e.$attrs.target);t&&window.scrollTo(0,t.offsetTop)}}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-form",{ref:"form",staticStyle:{"padding-right":"200px"},attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[n("h4",{attrs:{id:"BaseInfo"}},[e._v("基本信息：")]),e._v(" "),n("el-form-item",{attrs:{label:"商品名称",prop:"caseName"}},[n("el-input",{model:{value:e.form.caseName,callback:function(t){e.$set(e.form,"caseName",t)},expression:"form.caseName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"副标题"}},[n("el-input",{model:{value:e.form.subtitle,callback:function(t){e.$set(e.form,"subtitle",t)},expression:"form.subtitle"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"关键字",prop:"keywords"}},[n("el-input",{attrs:{placeholder:"商品关键字,使用','号分隔,能准确搜到商品的,比如: 海尔电视,电视之类"},model:{value:e.form.keywords,callback:function(t){e.$set(e.form,"keywords",t)},expression:"form.keywords"}})],1),e._v(" "),n("h4",{attrs:{id:"WorkInfo"}},[e._v("商品信息：")]),e._v(" "),n("el-form-item",{attrs:{label:"商品分类",prop:"secondaryCgyId"}},[n("el-select",{attrs:{placeholder:"选择商品分类"},on:{change:e.categoryChange},model:{value:e.form.secondaryCgyId,callback:function(t){e.$set(e.form,"secondaryCgyId",t)},expression:"form.secondaryCgyId"}},e._l(e.categories,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"商品主图",prop:"picUrlList"}},[e.form.picUrlList.length?n("el-row",{staticClass:"row"},e._l(e.form.picUrlList,function(t,r){return n("el-col",{key:r,staticClass:"col",attrs:{span:6}},[n("el-card",{staticStyle:{width:"250px"},attrs:{"body-style":{padding:"0px"}}},[n("a",{staticClass:"image",style:e.getImageStyle(t),attrs:{target:"_blank",href:e._f("setImg")(t)}}),e._v(" "),n("div",{staticStyle:{padding:"14px"}},[n("div",{staticClass:"bottom clearfix"},[n("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(t){e.form.picUrlList.splice(r,1)}}},[e._v("删除")])],1)])])],1)})):e._e(),e._v(" "),e.form.picUrlList.length<9?n("div",[n("ImageUpload",{attrs:{multiple:!1,prefix:"work"},on:{successCBK:e.workUploadSuccess}}),e._v(" "),n("div",[e._v("共"),n("span",{staticClass:"danger"},[e._v(e._s(e.form.picUrlList.length))]),e._v("张，还能上传"),n("span",{staticClass:"danger"},[e._v(e._s(9-e.form.picUrlList.length))]),e._v("张")])],1):e._e()],1),e._v(" "),n("el-form-item",{attrs:{label:"设计理念",prop:"designConcept"}},[n("el-input",{attrs:{autosize:{minRows:3,maxRows:5},type:"textarea",placeholder:"请输入设计理念，不超过500字"},model:{value:e.form.designConcept,callback:function(t){e.$set(e.form,"designConcept",t)},expression:"form.designConcept"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"运费设置(￥)",prop:"freightPrice"}},[n("el-input",{model:{value:e.form.freightPrice,callback:function(t){e.$set(e.form,"freightPrice",t)},expression:"form.freightPrice"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"库存",prop:"stock"}},[n("el-input",{model:{value:e.form.stock,callback:function(t){e.$set(e.form,"stock",e._n(t))},expression:"form.stock"}}),e._v(" "),n("el-radio-group",{model:{value:e.form.stockType,callback:function(t){e.$set(e.form,"stockType",t)},expression:"form.stockType"}},[n("el-radio",{attrs:{label:"1"}},[e._v("付款减库存")]),e._v(" "),n("el-radio",{attrs:{label:"2"}},[e._v("拍下减库存")])],1)],1),e._v(" "),n("h4",{attrs:{id:"WorkDetail"}},[e._v("商品详情：")]),e._v(" "),n("el-form-item",{attrs:{label:"参数设置",prop:"caseAttrsDTOList"}},[n("el-table",{staticStyle:{width:"540px","margin-bottom":"10px"},attrs:{data:e.form.caseAttrsDTOList,border:""}},[n("el-table-column",{attrs:{width:"180px",align:"center",label:"参数名称"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("el-input",{attrs:{placeholder:"请输入参数名称"},model:{value:r.attrName,callback:function(t){e.$set(r,"attrName",t)},expression:"row.attrName"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"180px",align:"center",label:"参数值"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("el-input",{attrs:{placeholder:"请输入参数值"},model:{value:r.attrValue,callback:function(t){e.$set(r,"attrValue",t)},expression:"row.attrValue"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"180px",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){t.row;var r=t.$index;return[n("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(t){e.form.caseAttrsDTOList.splice(r,1)}}},[e._v("删除")])]}}])})],1),e._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.form.caseAttrsDTOList.push({attrName:"",attrValue:""})}}},[e._v("添加参数")])],1),e._v(" "),n("el-form-item",{attrs:{label:"商品价格",prop:"price"}},[n("el-input",{model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",e._n(t))},expression:"form.price"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"原价",prop:"originalPrice"}},[n("el-input",{model:{value:e.form.originalPrice,callback:function(t){e.$set(e.form,"originalPrice",e._n(t))},expression:"form.originalPrice"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"设计师",prop:"designerName"}},[n("el-autocomplete",{staticStyle:{width:"300px"},attrs:{"popper-class":"my-autocomplete",placeholder:"请输入设计师姓名","trigger-on-focus":!1,"fetch-suggestions":e.querySearchAsync},on:{select:e.handleDesignerSelect},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.item;return[n("div",{staticClass:"name"},[e._v(e._s(r.userName))])]}}]),model:{value:e.form.designerName,callback:function(t){e.$set(e.form,"designerName",t)},expression:"form.designerName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"商品详情",prop:"caseInfo"}},[n("Tinymce",{ref:"editor",attrs:{height:500},model:{value:e.form.caseInfo,callback:function(t){e.$set(e.form,"caseInfo",t)},expression:"form.caseInfo"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.save}},[e._v("提交")])],1)],1),e._v(" "),n("el-tabs",{staticClass:"right-nav",attrs:{"tab-position":"right"},on:{"tab-click":e.tabClick}},[n("el-tab-pane",{attrs:{label:"基本信息",target:"#BaseInfo"}}),e._v(" "),n("el-tab-pane",{attrs:{label:"商品信息",target:"#WorkInfo"}}),e._v(" "),n("el-tab-pane",{attrs:{label:"商品详情",target:"#WorkDetail"}})],1)],1)},staticRenderFns:[]};var v=n("VU/8")(h,g,!1,function(e){n("mjH6")},"data-v-73da6528",null);t.default=v.exports}});