webpackJsonp([38],{D3Lz:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Xxa5"),n=r.n(a),o=r("//Fk"),i=r.n(o),s=r("d7EF"),l=r.n(s),u=r("exGp"),c=r.n(u),m=r("G+Fz"),d=r("cAgV"),f=r("TAej"),p=r("BNTT"),g=r("5aCZ"),b={directives:{waves:d.a},data:function(){return{loading:!1,categories:[],selectedCategory:[],form:{id:void 0,title:"",subtitle:"",thumbnail:"",columnId:void 0,keyword:"",summary:"",content:"",source:""},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"},{min:2,max:60,message:"长度在 2 到 60 个字符",trigger:"blur"}],subtitle:[{required:!0,message:"请输入子标题",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],columnId:[{required:!0,message:"请选择栏目",trigger:"blur"}],summary:[{required:!0,message:"请填写内容摘要",trigger:"blur"}],thumbnail:[{required:!0,message:"请上传缩略图",trigger:"blur"}],content:[{required:!0,message:"请填写正文内容",trigger:"blur"}],keyword:[{required:!0,message:"请填写关键字",trigger:"blur"}]},editStatus:!0}},beforeRouteLeave:function(e,t,r){this.onbeforeunloadHandler(r)},beforeRouteEnter:function(e,t,r){var a=this;return c()(n.a.mark(function t(){var o,s,u,c,d;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=[p.a.get()],e.query.id&&o.push(Object(m.b)(e.query.id).then(function(e){return e.data})),t.next=4,i.a.all(o);case 4:s=t.sent,u=l()(s,2),c=u[0],d=u[1],r(function(e){setTimeout(function(){e.categories=c,d&&(delete d.propIds,delete d.props,delete d.columns,e.form=d,e.selectedCategory=p.a.getParentId(e.form.columnId))},10)});case 9:case"end":return t.stop()}},t,a)}))()},methods:{save:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return e.$notify({title:"警告",message:"请务必填写必选项",type:"warning"}),!1;e.loading=!0,Object(m.d)(e.form).then(function(t){e.editStatus=!1,e.$notify({title:"成功",message:"提交成功",type:"success",duration:2e3}),e.$router.push({name:"articlePartnerList"}),e.loading=!1}).catch(function(){e.loading=!1})})},reset:function(){this.$refs.form.resetFields()},uploadSuccess:function(e){this.form.thumbnail=e[e.length-1].key},onbeforeunloadHandler:function(e){this.editStatus?window.confirm("确定要放弃当前的操作吗？")?e():e(!1):e()},handleCategoryChange:function(e){this.form.columnId=e[e.length-1]}},components:{ImageUpload:f.a,Tinymce:g.a}},h={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container",staticStyle:{"padding-right":"40px"}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"文章标题",prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"副标题",prop:"subtitle"}},[r("el-input",{attrs:{placeholder:"请输入副标题"},model:{value:e.form.subtitle,callback:function(t){e.$set(e.form,"subtitle",t)},expression:"form.subtitle"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"缩略图",prop:"thumbnail"}},[e.form.thumbnail?r("el-card",{staticStyle:{width:"250px"},attrs:{"body-style":{padding:"0px"}}},[r("img",{staticClass:"image",attrs:{src:e._f("setImg")(e.form.thumbnail)}}),e._v(" "),r("div",{staticStyle:{padding:"14px"}},[r("div",{staticClass:"bottom clearfix"},[r("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(t){e.form.thumbnail=""}}},[e._v("删除")])],1)])]):e._e(),e._v(" "),r("ImageUpload",{directives:[{name:"show",rawName:"v-show",value:!e.form.thumbnail,expression:"!form.thumbnail"}],attrs:{multiple:!1,prefix:"news"},on:{successCBK:e.uploadSuccess}})],1),e._v(" "),r("el-form-item",{attrs:{label:"所属栏目",prop:"columnId"}},[r("el-cascader",{attrs:{options:e.categories,props:{value:"id",label:"name"}},on:{change:e.handleCategoryChange},model:{value:e.selectedCategory,callback:function(t){e.selectedCategory=t},expression:"selectedCategory"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"关键字",prop:"keyword"}},[r("el-input",{attrs:{placeholder:'关键字请用","分开'},model:{value:e.form.keyword,callback:function(t){e.$set(e.form,"keyword",t)},expression:"form.keyword"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"内容摘要",prop:"summary"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:5}},model:{value:e.form.summary,callback:function(t){e.$set(e.form,"summary",t)},expression:"form.summary"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"来源",prop:"source"}},[r("el-input",{attrs:{placeholder:"请输入来源"},model:{value:e.form.source,callback:function(t){e.$set(e.form,"source",t)},expression:"form.source"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"正文内容",prop:"content"}},[r("Tinymce",{ref:"editor",attrs:{height:500},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.save}},[e._v("提交审核")])],1)],1)],1)},staticRenderFns:[]};var v=r("VU/8")(b,h,!1,function(e){r("aPcF")},"data-v-7f504fae",null);t.default=v.exports},"G+Fz":function(e,t,r){"use strict";t.c=function(e){return Object(a.a)({url:"/admin/partner/industry/article/list",method:"get",params:e})},t.b=function(e){return Object(a.a)({url:"/admin/partner/industry/article/detail/"+e,method:"get"})},t.a=function(e){return Object(a.a)({url:"/admin/partner/industry/article/delete/"+e,method:"post"})},t.d=function(e){return Object(a.a)({url:"/admin/partner/industry/article/save",method:"post",data:e})};var a=r("vLgD")},aPcF:function(e,t,r){var a=r("m9bp");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("rjj0")("35bac8c8",a,!0)},m9bp:function(e,t,r){(e.exports=r("FZ+f")(!1)).push([e.i,"\n.image[data-v-7f504fae] {\n  max-width: 80%;\n  max-height: 100%;\n  display: block;\n  margin: 10px auto 0;\n}\n",""])}});