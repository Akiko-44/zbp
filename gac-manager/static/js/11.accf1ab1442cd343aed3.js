webpackJsonp([11],{"5LK7":function(t,e,n){var i=n("xG1l");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("871c5254",i,!0)},"9bBU":function(t,e,n){n("mClu");var i=n("FeBl").Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},C4MV:function(t,e,n){t.exports={default:n("9bBU"),__esModule:!0}},bOdI:function(t,e,n){"use strict";e.__esModule=!0;var i,a=n("C4MV"),o=(i=a)&&i.__esModule?i:{default:i};e.default=function(t,e,n){return e in t?(0,o.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},mClu:function(t,e,n){var i=n("kM2E");i(i.S+i.F*!n("+E39"),"Object",{defineProperty:n("evD5").f})},xG1l:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.block[data-v-76f46e03] {\n  margin: 20px;\n  width: 959px;\n}\n.card[data-v-76f46e03] {\n  position: relative;\n}\n.actions[data-v-76f46e03] {\n  position: absolute;\n  bottom: 0px;\n  right: 8px;\n}\n",""])},zrM8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("R6Wb"),a=n("bOdI"),o=n.n(a),r=n("Oakg"),s={props:{title:String,fields:{type:Object,default:function(){return{id:"id",thumbnail:"thumbnail"}}},getData:Function,setData:Function,width:{type:Number,default:800},height:{type:Number,default:800},min:{type:Number,default:0}},components:{ImageCropper:r.a},data:function(){return{form:{data:[]},cropShow:!1,prefix:"thumbnail",currentIndex:1,loading:!1,listLoading:!1}},created:function(){var t=this;this.listLoading=!0,this.getData().then(function(e){t.listLoading=!1,t.form.data=e.data}).catch(function(){t.listLoading=!1})},computed:{isVaild:function(){return 0===this.min||this.min&&this.min===this.form.data.length}},methods:{add:function(){var t;this.form.data.push((t={},o()(t,this.fields.id,""),o()(t,this.fields.thumbnail,""),t))},save:function(){var t=this,e=this.form.data.length,n=this.form.data.filter(function(e){return e[t.fields.id]&&e[t.fields.thumbnail]}).length;this.isVaild?n&&e===n?(this.loading=!0,this.setData(this.form.data).then(function(e){t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.loading=!1}).catch(function(){t.loading=!1})):this.$message({title:"警告",message:"请填写ID并上传缩略图",type:"error"}):this.$message({title:"警告",message:"请至少添加"+this.min+"个",type:"error"})},uploadSuccess:function(t){var e=t.key,n=this.form.data[this.currentIndex];n[this.fields.thumbnail]=e,this.form.data.splice(this.currentIndex,1,n),this.cropShow=!1,this.$refs.cropper.setStep(1)}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"block"},[n("h4",[t._v(t._s(t.title))]),t._v(" "),n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"0px"}},[n("el-form-item",[n("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],staticStyle:{"margin-bottom":"10px"},attrs:{data:t.form.data,border:""}},[n("el-table-column",{attrs:{width:"180px",align:"center",label:t.title+"ID"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-input",{attrs:{placeholder:"请输入"+t.title+"ID"},model:{value:i[t.fields.id],callback:function(e){t.$set(i,t.fields.id,e)},expression:"row[fields.id]"}})]}}])}),t._v(" "),t._t("default"),t._v(" "),n("el-table-column",{attrs:{width:"100px",align:"center",label:"缩略图"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,a=e.$index;return[i[t.fields.thumbnail]?n("el-card",{staticClass:"card",attrs:{"body-style":{padding:"0px"}}},[n("img",{staticClass:"image",staticStyle:{display:"block"},attrs:{src:t._f("setImg")(i[t.fields.thumbnail]),width:"100%"}}),t._v(" "),n("div",{staticClass:"actions"},[n("el-button",{staticClass:"button",attrs:{icon:"el-icon-delete",type:"text"},on:{click:function(e){i[t.fields.thumbnail]=""}}})],1)]):n("el-button",{attrs:{plain:"",size:"small"},on:{click:function(e){t.cropShow=!0,t.currentIndex=a}}},[t._v("上传")])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"left",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){e.row;var i=e.$index;return[n("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(e){t.form.data.splice(i,1)}}},[t._v("删除")])]}}])})],2),t._v(" "),t.isVaild?t._e():n("el-button",{on:{click:t.add}},[t._v("添加")]),t._v(" "),n("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.save}},[t._v("保存")])],1)],1),t._v(" "),n("ImageCropper",{ref:"cropper",attrs:{noCircle:!0,noSquare:!0,withCredentials:!0,imgFormat:"jpg",width:t.width,height:t.height,prefix:t.prefix},on:{"crop-upload-success":t.uploadSuccess},model:{value:t.cropShow,callback:function(e){t.cropShow=e},expression:"cropShow"}})],1)},staticRenderFns:[]};var d=n("VU/8")(s,l,!1,function(t){n("5LK7")},"data-v-76f46e03",null).exports,u=n("vLgD");var m={components:{BannerSettings:i.a,RecommendSetting:d},methods:{getBanners:function(){return Object(u.a)({url:"/admin/portal/home/list",method:"get"})},saveBanners:function(t){return Object(u.a)({url:"/admin/portal/home/bannerSetting",method:"post",data:t})},homeDesignroomSetting:function(t){return Object(u.a)({url:"/admin/portal/home/homeDesignroomSetting",method:"post",data:t})},getHomeDesignroomList:function(){return Object(u.a)({url:"/admin/portal/home/getHomeDesignroomList",method:"get"})},homeManuSetting:function(t){return Object(u.a)({url:"/admin/portal/home/homeManuSetting",method:"post",data:t})},getHomeManuList:function(){return Object(u.a)({url:"/admin/portal/home/getHomeManuList ",method:"get"})},homeGallerySetting:function(t){return Object(u.a)({url:"/admin/portal/home/homeGallerySetting",method:"post",data:t})},getHomeGalleryList:function(){return Object(u.a)({url:"/admin/portal/home/getHomeGalleryList",method:"get"})},homeIndustrySetting:function(t){return Object(u.a)({url:"/admin/portal/home/homeIndustrySetting",method:"post",data:t})},getHomeIndustryList:function(){return Object(u.a)({url:"/admin/portal/home/getHomeIndustryList",method:"get"})},homeLiveshowSetting:function(t){return Object(u.a)({url:"/admin/portal/home/homeLiveshowSetting",method:"post",data:t})},getHomeLiveshowList:function(){return Object(u.a)({url:"/admin/portal/home/getHomeLiveshowList",method:"get"})}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("BannerSettings",{attrs:{getBanners:t.getBanners,saveBanners:t.saveBanners}}),t._v(" "),n("RecommendSetting",{attrs:{title:"设计室",getData:t.getHomeDesignroomList,setData:t.homeDesignroomSetting,min:5,width:390,height:200,fields:{id:"designroomId",thumbnail:"homePic"}}}),t._v(" "),n("RecommendSetting",{attrs:{title:"制造间",getData:t.getHomeManuList,setData:t.homeManuSetting,min:5,width:390,height:200,fields:{id:"manuId",thumbnail:"homePic"}}}),t._v(" "),n("RecommendSetting",{attrs:{title:"图文馆",getData:t.getHomeGalleryList,setData:t.homeGallerySetting,min:8,fields:{id:"galleryId",thumbnail:"homePic"}}}),t._v(" "),n("RecommendSetting",{attrs:{title:"行业之声",getData:t.getHomeIndustryList,setData:t.homeIndustrySetting,min:4,fields:{id:"industryId",thumbnail:"homePic"}}},[n("el-table-column",{attrs:{width:"180px",align:"center",label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-input",{attrs:{placeholder:"请输入标题"},model:{value:i.title,callback:function(e){t.$set(i,"title",e)},expression:"row.title"}})]}}])})],1),t._v(" "),n("RecommendSetting",{attrs:{title:"珠宝展",getData:t.getHomeLiveshowList,setData:t.homeLiveshowSetting,min:4,fields:{id:"liveshowId",thumbnail:"homePic"}}})],1)},staticRenderFns:[]},h=n("VU/8")(m,c,!1,null,null,null);e.default=h.exports}});